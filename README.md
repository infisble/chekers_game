# Checkers Game (WinForms, C#)

Классическая игра в шашки на WinForms с разделением на доменный движок и UI-слой.

## Что сделано

- Разделена архитектура: правила игры вынесены из формы в отдельный `Game`-модуль.
- Форма (`Form1`) теперь отвечает только за:
  - рендер доски;
  - обработку кликов;
  - подсветку доступных действий;
  - отображение статуса партии.
- Реализованы правила для:
  - обычных шашек;
  - дамок;
  - обязательного взятия;
  - серии взятий одной фигурой за ход;
  - окончания партии (победа по отсутствию фигур или ходов).

## Архитектура

Проект разделен на 2 уровня ответственности:

1. `Game` (домен/правила)
- не зависит от WinForms;
- хранит состояние партии;
- вычисляет валидные ходы;
- применяет ход и переключает игрока.

2. `Form1` (презентация)
- читает состояние из `CheckersGame`;
- отрисовывает фигуры и подсветку;
- отправляет выбор пользователя в движок;
- не содержит бизнес-правил.

### Структура

- `WinFormsApp11/Form1.cs` - UI-адаптер и рендеринг.
- `WinFormsApp11/Game/PieceColor.cs` - цвет фигуры.
- `WinFormsApp11/Game/PieceKind.cs` - тип фигуры (обычная/дамка).
- `WinFormsApp11/Game/Piece.cs` - value type фигуры.
- `WinFormsApp11/Game/Position.cs` - позиция на доске и утилиты координат.
- `WinFormsApp11/Game/Move.cs` - модель хода.
- `WinFormsApp11/Game/CheckersBoard.cs` - состояние доски.
- `WinFormsApp11/Game/CheckersGame.cs` - оркестратор партии и движок правил.

## Правила, поддерживаемые движком

- Размер доски: 8x8.
- Стартовая расстановка: классическая, по темным полям.
- Обычная шашка:
  - ходит по диагонали вперед на 1 клетку;
  - бьет по диагонали через фигуру соперника на пустую клетку;
  - при взятии может бить в обе стороны;
  - становится дамкой на последней линии.
- Дамка:
  - ходит по диагонали на любое расстояние;
  - бьет по диагонали через одну фигуру соперника с посадкой на любую пустую клетку после нее.
- Если есть взятие, обычный ход запрещен.
- Если после взятия можно бить дальше той же фигурой, ход продолжается этой фигурой.

## Подход к качеству кода

- Единая точка истины для правил: `CheckersGame`.
- Иммутабельные базовые типы (`record struct`) для координат и фигур.
- Предсказуемый API:
  - `GetSelectablePieces()`;
  - `GetLegalMoves(Position from)`;
  - `ApplyMove(Move move)`.
- Минимум логики в UI: проще тестировать и развивать.
- Читаемые имена и small-method подход.

## Запуск проекта

1. Открыть решение:
   - `WinFormsApp11/WinFormsApp11.sln`
2. Запустить в Visual Studio (`F5`) или через CLI:

```powershell
dotnet build WinFormsApp11/WinFormsApp11.sln
dotnet run --project WinFormsApp11/WinFormsApp11.csproj
```

## UX-подсветка

- Зеленая рамка: фигуры, которые можно выбрать.
- Синяя рамка: текущая выбранная фигура.
- Желтый цвет: клетки, куда можно сходить.
- `label1`: текущий статус игры (чей ход, продолжение взятия, победитель).

## Что можно улучшить дальше

- Добавить юнит-тесты на `CheckersGame` (критические сценарии взятий/дамок).
- Добавить историю ходов и кнопку `Undo`.
- Добавить выбор режима правил (русские/международные/английские).
- Добавить AI-игрока (минимакс + эвристика позиции).
- Вынести настройки UI (цвета, размеры, тема) в конфиг.

## Примечания по развитию

Проект уже переведен в архитектуру, с которой можно безопасно расширять функционал без расползания логики по форме. Любые новые правила нужно добавлять в `CheckersGame`, а UI только отобразит результат.
